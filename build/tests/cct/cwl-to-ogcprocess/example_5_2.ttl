@prefix cwl: <https://w3id.org/cwl/cwl#> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix geo: <http://www.opengis.net/ont/geosparql#> .
@prefix ns1: <rdf:> .
@prefix ns2: <s:> .
@prefix ogcproc: <http://www.opengis.net/def/ogcapi/processes/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

[] cwl:cwlVersion <file:///github/workspace/v1.0> ;
    cwl:graph [ rdfs:label "Mangrove Biomass Workflow"^^xsd:string ;
            dct:identifier <file:///github/workspace/mangrove-workflow> ;
            ogcproc:input _:N6c9029e443d142d4b2464dbd66dc29bd ;
            ogcproc:output _:Ned2f4f9e4d724c2499649965b7de1c41 ;
            rdfs:comment """Workflow for Mangrove Biomass Analysis
  
This workflow orchestrates the mangrove biomass estimation process using
Sentinel-2 imagery. It wraps the mangrove_workflow.cwl tool to provide
a reusable workflow for analyzing different study areas.
"""^^xsd:string ;
            cwl:input _:N6c9029e443d142d4b2464dbd66dc29bd ;
            cwl:output _:Ned2f4f9e4d724c2499649965b7de1c41 ;
            cwl:requirements [ cwl:InlineJavascriptRequirement [ ] ;
                    cwl:ScatterFeatureRequirement [ ] ;
                    cwl:SchemaDefRequirement [ cwl:types [ cwl:import <https://raw.githubusercontent.com/eoap/schemas/main/ogc.yaml> ],
                                [ cwl:import <https://raw.githubusercontent.com/eoap/schemas/main/stac.yaml> ] ] ;
                    cwl:StepInputExpressionRequirement [ ] ;
                    cwl:SubworkflowFeatureRequirement [ ] ] ;
            cwl:steps [ cwl:parse_aoi [ cwl:in [ cwl:aoi "aoi" ] ;
                            cwl:out ( "west" "south" "east" "north" "output_dir" ) ;
                            cwl:run <file:///github/workspace/#parse_aoi> ] ;
                    cwl:step_1 [ cwl:in [ cwl:cloud_cover_max "cloud_cover_max" ;
                                    cwl:days_back "days_back" ;
                                    cwl:east "parse_aoi/east" ;
                                    cwl:north "parse_aoi/north" ;
                                    cwl:output_dir "parse_aoi/output_dir" ;
                                    cwl:south "parse_aoi/south" ;
                                    cwl:west "parse_aoi/west" ] ;
                            cwl:out ( "result" ) ;
                            cwl:run <file:///github/workspace/#mangrove_cli> ] ] ;
            ns1:type <file:///github/workspace/Workflow> ],
        [ dct:identifier <file:///github/workspace/parse_aoi> ;
            ogcproc:input _:N7e719b086bd447859820ddf851d87074 ;
            ogcproc:output _:N15287461e7ea4757832fdce740e9956a ;
            cwl:arguments ( "--" ) ;
            cwl:baseCommand "\"echo\""^^rdf:JSON ;
            cwl:hints [ cwl:DockerRequirement [ cwl:dockerPull "alpine:3.22.2"^^xsd:string ] ] ;
            cwl:input _:N7e719b086bd447859820ddf851d87074 ;
            cwl:output _:N15287461e7ea4757832fdce740e9956a ;
            cwl:requirements [ cwl:InlineJavascriptRequirement [ ] ;
                    cwl:ResourceRequirement [ cwl:coresMax 1 ;
                            cwl:ramMax 512 ] ;
                    cwl:SchemaDefRequirement [ cwl:types [ cwl:import <https://raw.githubusercontent.com/eoap/schemas/main/ogc.yaml> ] ] ] ;
            ns1:type <file:///github/workspace/CommandLineTool> ],
        [ dct:identifier <file:///github/workspace/mangrove_cli> ;
            ogcproc:input _:Nff252f9daff94db08660c890b43bc480 ;
            ogcproc:output _:Naaef9b28061e4d27a97de437c2338b67 ;
            cwl:arguments ( "--" ) ;
            cwl:baseCommand "\"/app/cwl/bin/mangrove_workflow_for_cwl\""^^rdf:JSON ;
            cwl:hints [ cwl:DockerRequirement [ cwl:dockerPull "ghcr.io/geolabs/kindgrove/mangrove-cwl:v0.0.1-rc7"^^xsd:string ] ] ;
            cwl:input _:Nff252f9daff94db08660c890b43bc480 ;
            cwl:output _:Naaef9b28061e4d27a97de437c2338b67 ;
            cwl:requirements [ cwl:InlineJavascriptRequirement [ ] ;
                    cwl:ResourceRequirement [ cwl:coresMax 1 ;
                            cwl:ramMax 512 ] ] ;
            ns1:type <file:///github/workspace/CommandLineTool> ] ;
    cwl:namespaces "{\"s\":\"https://schema.org/\"}"^^rdf:JSON ;
    cwl:schemas "http://schema.org/version/9.0/schemaorg-current-http.rdf" ;
    ns2:author [ ns1:type ns2:Person ;
            ns2:name "Cameron Sajedi" ] ;
    ns2:codeRepository "https://github.com/starling-foundries/KindGrove" ;
    ns2:contributor [ ns1:type ns2:Person ;
            ns2:identifier "https://orcid.org/0000-0002-9617-8641" ;
            ns2:name "GÃ©rald Fenoy" ] ;
    ns2:keywords "OSPD",
        "biomass",
        "mangrove" ;
    ns2:license "https://github.com/starling-foundries/KindGrove?tab=MIT-1-ov-file#readme" ;
    ns2:softwareVersion "0.0.1" .

_:N00540dab2a8640e6804f33e043b04184 cwl:inputBinding [ cwl:prefix "--days_back"^^xsd:string ] ;
    cwl:type <file:///github/workspace/int> .

_:N065f607dbde74cdead66fc7fbd8cbda5 cwl:outputEval "$(inputs.aoi.bbox[2])"^^xsd:string .

_:N069a84705c7f43b882ff0592beec8fb8 cwl:outputBinding [ cwl:outputEval "$(inputs.aoi.bbox[0])"^^xsd:string ] ;
    cwl:type <file:///github/workspace/float> .

_:N10ae29c7452a443ea486a832a4695230 cwl:east [ cwl:outputBinding _:N065f607dbde74cdead66fc7fbd8cbda5 ;
            cwl:type <file:///github/workspace/float> ] ;
    cwl:north [ cwl:outputBinding [ cwl:outputEval "$(inputs.aoi.bbox[3])"^^xsd:string ] ;
            cwl:type <file:///github/workspace/float> ] ;
    cwl:output_dir [ cwl:outputBinding [ cwl:outputEval "$(\"outputs\")"^^xsd:string ] ;
            cwl:type <file:///github/workspace/string> ] ;
    cwl:south [ cwl:outputBinding [ cwl:outputEval "$(inputs.aoi.bbox[1])"^^xsd:string ] ;
            cwl:type <file:///github/workspace/float> ] ;
    cwl:west _:N069a84705c7f43b882ff0592beec8fb8 .

_:N115fc48e3c814a12be8249e8def7ef45 cwl:stac [ cwl:outputSource <file:///github/workspace/step_1/result> ;
            cwl:type <file:///github/workspace/Directory> ] .

_:N1261ed64baf64e489c115422aa39a3d6 cwl:inputBinding [ cwl:prefix "--east"^^xsd:string ] ;
    cwl:type <file:///github/workspace/float> .

_:N17f86ce0971d4d0aaa5782b922e2834b cwl:cloud_cover_max [ cwl:inputBinding [ cwl:prefix "--cloud_cover_max"^^xsd:string ] ;
            cwl:type <file:///github/workspace/float> ] ;
    cwl:days_back _:N00540dab2a8640e6804f33e043b04184 ;
    cwl:east _:N1261ed64baf64e489c115422aa39a3d6 ;
    cwl:north [ cwl:inputBinding [ cwl:prefix "--north"^^xsd:string ] ;
            cwl:type <file:///github/workspace/float> ] ;
    cwl:output_dir [ cwl:inputBinding [ cwl:prefix "--output_dir"^^xsd:string ] ;
            cwl:type <file:///github/workspace/string> ] ;
    cwl:south [ cwl:inputBinding [ cwl:prefix "--south"^^xsd:string ] ;
            cwl:type <file:///github/workspace/float> ] ;
    cwl:west [ cwl:inputBinding [ cwl:prefix "--west"^^xsd:string ] ;
            cwl:type <file:///github/workspace/float> ] .

_:N32a6960e5bf34d5bbf0ac7516acaa9f3 rdfs:label "Area of Interest"^^xsd:string ;
    ogcproc:itemsType "number"^^xsd:string ;
    ogcproc:maxItems 6 ;
    ogcproc:minItems 4 ;
    ogcproc:schemaType "array"^^xsd:string ;
    rdfs:comment "Area of interest as a bounding box"^^xsd:string ;
    rdfs:seeAlso geo:BoundingBox ;
    cwl:type <https://raw.githubusercontent.com/eoap/schemas/main/ogc.yaml#BBox> .

_:N7bcb926c02b6446c86bf29093e670374 cwl:aoi _:N32a6960e5bf34d5bbf0ac7516acaa9f3 ;
    cwl:cloud_cover_max [ rdfs:label "Maximum Cloud Cover"^^xsd:string ;
            rdfs:comment "Maximum acceptable cloud cover percentage (0-100)"^^xsd:string ;
            cwl:type <file:///github/workspace/float> ] ;
    cwl:days_back [ rdfs:label "Days Back"^^xsd:string ;
            rdfs:comment "Number of days to search backwards from current date"^^xsd:string ;
            cwl:type <file:///github/workspace/int> ] .

_:Nca1d9738a1334766b6a05e55d36e349e cwl:aoi [ rdfs:label "Area of interest"^^xsd:string ;
            ogcproc:itemsType "number"^^xsd:string ;
            ogcproc:maxItems 6 ;
            ogcproc:minItems 4 ;
            ogcproc:schemaType "array"^^xsd:string ;
            rdfs:comment "Area of interest defined as a bounding box"^^xsd:string ;
            rdfs:seeAlso geo:BoundingBox ;
            cwl:type <https://raw.githubusercontent.com/eoap/schemas/main/ogc.yaml#BBox> ] .

_:Ncded18d6e4a34ffe96bdc4181ccd2e6d cwl:glob "outputs"^^xsd:string .

_:Ndb6ca1751ee8421badfb3b1dc002e484 cwl:outputBinding _:Ncded18d6e4a34ffe96bdc4181ccd2e6d ;
    cwl:type <file:///github/workspace/Directory> .

_:Nf17f6f5adf0944f890bd36c4424deb28 cwl:result _:Ndb6ca1751ee8421badfb3b1dc002e484 .

_:N15287461e7ea4757832fdce740e9956a a ogcproc:OutputDescription ;
    rdf:first _:N10ae29c7452a443ea486a832a4695230 ;
    rdf:rest () .

_:N6c9029e443d142d4b2464dbd66dc29bd a ogcproc:InputDescription ;
    rdf:first _:N7bcb926c02b6446c86bf29093e670374 ;
    rdf:rest () .

_:N7e719b086bd447859820ddf851d87074 a ogcproc:InputDescription ;
    rdf:first _:Nca1d9738a1334766b6a05e55d36e349e ;
    rdf:rest () .

_:Naaef9b28061e4d27a97de437c2338b67 a ogcproc:OutputDescription ;
    rdf:first _:Nf17f6f5adf0944f890bd36c4424deb28 ;
    rdf:rest () .

_:Ned2f4f9e4d724c2499649965b7de1c41 a ogcproc:OutputDescription ;
    rdf:first _:N115fc48e3c814a12be8249e8def7ef45 ;
    rdf:rest () .

_:Nff252f9daff94db08660c890b43bc480 a ogcproc:InputDescription ;
    rdf:first _:N17f86ce0971d4d0aaa5782b922e2834b ;
    rdf:rest () .

