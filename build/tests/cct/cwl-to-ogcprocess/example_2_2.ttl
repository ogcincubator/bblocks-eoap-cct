@prefix cwl: <https://w3id.org/cwl/cwl#> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix ns1: <rdf:> .
@prefix ogcproc: <http://www.opengis.net/def/ogcapi/processes/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

[] cwl:cwlVersion <file:///github/workspace/v1.2> ;
    cwl:graph [ rdfs:label "Echo GeoJSON Feature"^^xsd:string ;
            dct:identifier <file:///github/workspace/clt> ;
            ogcproc:input _:N10a204cfdccf42de9168cf90df510acc ;
            ogcproc:output _:N116ac412478740239fd49bf54cd9730e ;
            cwl:baseCommand "\"echo\""^^rdf:JSON ;
            cwl:input _:N10a204cfdccf42de9168cf90df510acc ;
            cwl:output _:N116ac412478740239fd49bf54cd9730e ;
            cwl:requirements [ ns1:type <file:///github/workspace/InlineJavascriptRequirement> ],
                [ cwl:types [ cwl:import <https://raw.githubusercontent.com/eoap/schemas/main/geojson.yaml> ] ;
                    ns1:type <file:///github/workspace/SchemaDefRequirement> ] ;
            cwl:stdout "echo_output.txt"^^xsd:string ;
            ns1:type <file:///github/workspace/CommandLineTool> ],
        [ rdfs:label "GeoJSON Feature Processing Workflow"^^xsd:string ;
            dct:identifier <file:///github/workspace/feature-workflow> ;
            ogcproc:input _:N8368fb5c1f094f7d82d78c4476652309 ;
            ogcproc:output _:Ncd53c2517b8e41f9bf2c8c85c9db0113 ;
            rdfs:comment "Workflow that processes GeoJSON Feature input and generates output"^^xsd:string ;
            cwl:input _:N8368fb5c1f094f7d82d78c4476652309 ;
            cwl:output _:Ncd53c2517b8e41f9bf2c8c85c9db0113 ;
            cwl:requirements [ ns1:type <file:///github/workspace/InlineJavascriptRequirement> ],
                [ cwl:types [ cwl:import <https://raw.githubusercontent.com/eoap/schemas/main/geojson.yaml> ] ;
                    ns1:type <file:///github/workspace/SchemaDefRequirement> ] ;
            cwl:steps [ cwl:echo_step [ cwl:in [ cwl:aoi "aoi" ] ;
                            cwl:out ( "echo_output" ) ;
                            cwl:run <file:///github/workspace/#clt> ] ] ;
            ns1:type <file:///github/workspace/Workflow> ] .

_:N04f4f1f84d7f496da5ec6f7eecf7b1a6 cwl:echo_output [ cwl:type <file:///github/workspace/stdout> ] .

_:N222da70f427644afb6327f2c1a3d7aee rdfs:label "Area of interest"^^xsd:string ;
    dct:format <https://www.iana.org/assignments/media-types/application/geo+json> ;
    ogcproc:schemaType "object"^^xsd:string ;
    rdfs:comment "Area of interest defined in GeoJSON format"^^xsd:string ;
    rdfs:seeAlso <https://purl.org/geojson/vocab#Feature> ;
    cwl:inputBinding [ cwl:valueFrom """${
  // Validate if type is 'Feature'
  if (inputs.aoi.type !== 'Feature') {
    throw "Invalid GeoJSON type: expected 'Feature', got '" + inputs.aoi.type + "'";
  }
  // get the Feature geometry type
  return "Feature with id '" + inputs.aoi.id + "' is of type: " + inputs.aoi.geometry.type;
}
"""^^xsd:string ] ;
    cwl:type <https://raw.githubusercontent.com/eoap/schemas/main/geojson.yaml#Feature> .

_:N529c2d30383d4e46a85d9b9acc834e12 rdfs:label "Area of interest"^^xsd:string ;
    dct:format <https://www.iana.org/assignments/media-types/application/geo+json> ;
    dct:identifier <file:///github/workspace/aoi> ;
    ogcproc:schemaType "object"^^xsd:string ;
    rdfs:comment "Area of interest defined in GeoJSON format"^^xsd:string ;
    rdfs:seeAlso <https://purl.org/geojson/vocab#Feature> ;
    cwl:type <https://raw.githubusercontent.com/eoap/schemas/main/geojson.yaml#Feature> .

_:N5f6c6fa523294b5c91fbe18d12100684 cwl:aoi _:N222da70f427644afb6327f2c1a3d7aee .

_:Nf75554450d784a6fbb60de6cdafba1b6 rdfs:label "Echo output"^^xsd:string ;
    dct:identifier <file:///github/workspace/echo_output> ;
    rdfs:comment "Echoed GeoJSON Feature information"^^xsd:string ;
    cwl:outputSource <file:///github/workspace/echo_step/echo_output> ;
    cwl:type <file:///github/workspace/File> .

_:N10a204cfdccf42de9168cf90df510acc a ogcproc:InputDescription ;
    rdf:first _:N5f6c6fa523294b5c91fbe18d12100684 ;
    rdf:rest () .

_:N116ac412478740239fd49bf54cd9730e a ogcproc:OutputDescription ;
    rdf:first _:N04f4f1f84d7f496da5ec6f7eecf7b1a6 ;
    rdf:rest () .

_:N8368fb5c1f094f7d82d78c4476652309 a ogcproc:InputDescription ;
    rdf:first _:N529c2d30383d4e46a85d9b9acc834e12 ;
    rdf:rest () .

_:Ncd53c2517b8e41f9bf2c8c85c9db0113 a ogcproc:OutputDescription ;
    rdf:first _:Nf75554450d784a6fbb60de6cdafba1b6 ;
    rdf:rest () .

